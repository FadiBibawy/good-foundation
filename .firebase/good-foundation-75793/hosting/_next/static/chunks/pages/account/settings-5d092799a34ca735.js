(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[718],{1331:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/settings",function(){return t(7131)}])},9398:function(e,s,t){"use strict";var r=t(5893);let l=e=>{let{children:s,danger:t}=e;return t?(0,r.jsx)("div",{className:"flex flex-col justify-between border-2 border-red-600 rounded",children:s}):(0,r.jsx)("div",{className:"flex flex-col justify-between border rounded dark:border-gray-600",children:s})};l.Body=e=>{let{children:s,subtitle:t,title:l}=e;return(0,r.jsxs)("div",{className:"flex flex-col p-5 space-y-3 overflow-auto",children:[l?(0,r.jsx)("h2",{className:"text-2xl font-bold",children:l}):(0,r.jsx)("div",{className:"w-full h-8 bg-gray-400 rounded animate-pulse"}),t&&(0,r.jsx)("h3",{className:"text-gray-400",children:t}),(0,r.jsx)("div",{className:"flex flex-col",children:s})]})},l.Empty=e=>{let{children:s}=e;return(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"flex items-center justify-center p-5 bg-gray-100 border-4 border-dashed rounded dark:bg-transparent dark:border-gray-600",children:(0,r.jsx)("p",{children:s})})})},l.Footer=e=>{let{children:s}=e;return(0,r.jsx)("div",{className:"flex flex-row items-center justify-between px-5 py-3 space-x-5 bg-gray-100 border-t rounded-b dark:border-t-gray-600 dark:bg-gray-900",children:s})},l.Body.displayName="Body",l.Empty.displayName="Empty",l.Footer.displayName="Footer",s.Z=l},7131:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return y}});var r=t(5893),l=t(7294),a=t(4363),n=t(3299),i=t(4855),o=t(6501),d=t(3868),c=t.n(d),u=t(5280),x=t(9398),h=t(9769),m=t(6400),b=t(5102),p=t(1666),g=t(3167),j=t(7421);let f=e=>{let{user:s}=e,[t,d]=(0,l.useState)(s.email||""),[f,y]=(0,l.useState)(!1),[v,N]=(0,l.useState)(s.name||""),[Z,w]=(0,l.useState)(!1),[k]=(0,l.useState)(s.userCode),[E,C]=(0,l.useState)(""),_=v.length>0&&v.length<=32,P=c()(t),{t:S}=(0,j.$G)(),T=()=>o.ZP.success("Copied to clipboard!"),B=e=>{e.preventDefault(),y(!0),(0,g.Z)("/api/user/name",{body:{name:v},method:"PUT"}).then(e=>{y(!1),e.errors?Object.keys(e.errors).forEach(s=>o.ZP.error(e.errors[s].msg)):o.ZP.success("Name successfully updated!")})},D=e=>{e.preventDefault();let s=confirm("Are you sure you want to update your email address?");s&&(y(!0),(0,g.Z)("/api/user/email",{body:{email:t},method:"PUT"}).then(e=>{y(!1),e.errors?Object.keys(e.errors).forEach(s=>o.ZP.error(e.errors[s].msg)):(o.ZP.success("Email successfully updated and signing you out!"),setTimeout(()=>(0,n.signOut)({callbackUrl:"/auth/login"}),2e3))}))},F=e=>{e.preventDefault(),y(!0),(0,g.Z)("/api/user",{method:"DELETE"}).then(e=>{y(!1),X(),e.errors?Object.keys(e.errors).forEach(s=>o.ZP.error(e.errors[s].msg)):o.ZP.success("Account has been deactivated!")})},O=e=>d(e.target.value),A=e=>N(e.target.value),U=e=>C(e.target.value),X=()=>{C(""),w(!Z)};return(0,r.jsxs)(p.p0,{children:[(0,r.jsx)(m.Z,{title:"Nextacular - Account Settings"}),(0,r.jsx)(h.Z.Title,{title:S("settings.header.title"),subtitle:S("settings.header.description")}),(0,r.jsx)(h.Z.Divider,{}),(0,r.jsxs)(h.Z.Container,{children:[(0,r.jsx)(x.Z,{children:(0,r.jsxs)("form",{children:[(0,r.jsx)(x.Z.Body,{title:S("settings.profile.name"),subtitle:"Please enter your full name, or a display name you are comfortable with",children:(0,r.jsx)("input",{className:"px-3 py-2 border rounded md:w-1/2",disabled:f,onChange:A,type:"text",value:v})}),(0,r.jsxs)(x.Z.Footer,{children:[(0,r.jsx)("small",{children:S("settings.profile.name.validation.message")}),(0,r.jsx)(u.Z,{className:"text-white bg-blue-600 hover:bg-blue-500",disabled:!_||f,onClick:B,children:S("common.label.save")})]})]})}),(0,r.jsx)(x.Z,{children:(0,r.jsxs)("form",{children:[(0,r.jsx)(x.Z.Body,{title:S("settings.profile.email.label"),subtitle:S("settings.profile.email.description"),children:(0,r.jsx)("input",{className:"px-3 py-2 border rounded md:w-1/2",disabled:f,onChange:O,type:"email",value:t})}),(0,r.jsxs)(x.Z.Footer,{children:[(0,r.jsx)("small",{children:S("settings.profile.email.message")}),(0,r.jsx)(u.Z,{className:"text-white bg-blue-600 hover:bg-blue-500",disabled:!P||f,onClick:D,children:S("common.label.save")})]})]})}),(0,r.jsx)(x.Z,{children:(0,r.jsx)(x.Z.Body,{title:S("settings.profile.personal.account.id"),subtitle:S("settings.profile.personal.account.message"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 space-x-5 font-mono text-sm border rounded md:w-1/2",children:[(0,r.jsx)("span",{className:"overflow-x-auto",children:k}),(0,r.jsx)(i.CopyToClipboard,{onCopy:T,text:k,children:(0,r.jsx)(a,{className:"w-5 h-5 cursor-pointer hover:text-blue-600"})})]})})}),(0,r.jsxs)(x.Z,{danger:!0,children:[(0,r.jsx)(x.Z.Body,{title:S("settings.account.deactive.title"),subtitle:S("settings.account.deactive.description")}),(0,r.jsxs)(x.Z.Footer,{children:[(0,r.jsx)("small",{children:S("settings.account.deactive.message")}),(0,r.jsx)(u.Z,{className:"text-white bg-red-600 hover:bg-red-500",onClick:X,children:S("settings.account.action.deactive.label")})]}),(0,r.jsxs)(b.Z,{show:Z,title:"Deactivate Personal Account",toggle:X,children:[(0,r.jsx)("p",{children:S("settings.account.action.deactive.label")}),(0,r.jsxs)("p",{className:"px-3 py-2 text-red-600 border border-red-600 rounded",children:[(0,r.jsx)("strong",{children:"Warning:"})," ",S("settings.account.deactive.message")]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("label",{className:"text-sm text-gray-400",children:["Enter ",(0,r.jsx)("strong",{children:s.email})," to continue:"]}),(0,r.jsx)("input",{className:"px-3 py-2 border rounded",disabled:f,onChange:U,type:"email",value:E})]}),(0,r.jsx)("div",{className:"flex flex-col items-stretch",children:(0,r.jsx)(u.Z,{className:"text-white bg-red-600 hover:bg-red-500",disabled:E!==t||f,onClick:F,children:(0,r.jsx)("span",{children:S("settings.account.action.deactive.label")})})})]})]})]})]})};var y=!0;s.default=f}},function(e){e.O(0,[664,438,667,575,774,888,179],function(){return e(e.s=1331)}),_N_E=e.O()}]);